[Unit]
Description=Ceilometer API
After=mongodb.service rabbitmq-server.service

[Service]
User=ceilometer
Group=ceilometer
Type=simple
WorkingDirectory=/var/lib/ceilometer
PermissionsStartOnly=true
Environment=PORT=8777
ExecStartPre=/bin/mkdir -p /var/lock/ceilometer /var/log/ceilometer /var/lib/ceilometer
ExecStartPre=/bin/chown ceilometer:ceilometer /var/lock/ceilometer /var/lib/ceilometer
ExecStartPre=/bin/chown ceilometer:adm /var/log/ceilometer
ExecStart=/usr/bin/ceilometer-api --port ${PORT} -- --config-file=/etc/ceilometer/ceilometer.conf --log-file=/var/log/ceilometer/ceilometer-api.log
Restart=on-failure
LimitNOFILE=65535
TimeoutStopSec=15

[Install]
WantedBy=multi-user.target
